% BEGIN 040.results.tex. Simulation results and discussion.
\section{Results and discussion}\label{sec:results}
% Shortcomings in the MATLAB program
The \matlab\ program described in implementation section has different shortcomings, mostly in performance, that makes it hard to carry out numerous demanding examinations of the game model. Nevertheless some investigations were carried out and the results are presented in this section.

During simulation fitness proportional selection were used, and the parameters were set according to Table \ref{tab:results:parameters}


\begin{table}[!hbtp]
  \centering
  \caption{Parameter settings during simulations. Total number of simulations: 35}
  \label{tab:results:parameters}
  \footnotesize

  a) Static parameters % \red{Change to exponential form}
  \myhalfpar

  \begin{tabular}{c}
    \begin{tabular}{ll@{$~=~$}l}
      \hline
      Number of individuals        & $\mu$                      & $100$  \\
      Number of parents        & \texttt{nPar}              & variating \\
      Selection pressure     & \texttt{selectionPressure} & 0.1    \\
      Number generations     & \texttt{nGenerations}      & 10000  \\
      Mut. float length      & \texttt{mutFloatLength}    & 0.05   \\
      \hline
      Payoff for \textsc{cc} & \texttt{payoffCC}          & 3      \\
      Payoff for \textsc{dc} & \texttt{payoffDC}          & 5      \\
      Payoff for \textsc{cd} & \texttt{payoffCD}          & 0         \\
      Payoff for \textsc{dd} & \texttt{payoffDD}          & 1         \\
      \hline
      Prob. for switch       & \texttt{pMutSwitch}        & variating \\
      Prob. for split        & \texttt{pMutSplit}         & -''-      \\
      Prob. for duplicate    & \texttt{pMutDuplicate}     & -''-      \\
      Prob. for float mut.   & \texttt{pMutFloat}         & -''-      \\
      Prob. for error        & \texttt{pError}            & -''-      \\
      \hline
    \end{tabular}
  \end{tabular}\mypar

  b) Swept parameters\myhalfpar

  \newcommand \temp {$5\cdot 10^{-4}$}
  \begin{tabular}{*{8}{l}}
    Simulation    & 1--5               & 6--10    & 11--15    & 16--20   & 21--25   & 26--30   & 31--35   \\
    \hline
    \texttt{pMut} & $\mathbf{10^{-4}}$ & \temp       & $\mathbf{10^{-3}}$ & \temp       & \temp       & \temp       & \temp       \\
    \texttt{nPar} & $0.2\,\mu$          & $0.2\,\mu$ & $0.2\,\mu$  & $\mathbf{0.1\,\mu}$ & $0.2\,\mu$ & $\mathbf{0.4\,\mu}$ & $0.2\,\mu$ \\
    \texttt{pErr} & $0.01$             & $0.01$   & $0.01$    & $0.01$   & $0.01$   & $0.01$   & $\mathbf{0}$ 
  \end{tabular}
\end{table}

All populations start with $25 \%$ 00,01,10,11 strategies.  % Vad betyder egentligen detta?

\subsection{Simulations and results}
% Interpretation of the figures
The following figures show some results. The figures should be interpreted in the following way: the lower part shows the distribution of game outcomes, and the upper part shows what strategies that occurs and to what extent they dominate the population.

The first thing investigated was the mutation rate $p_{\textrm{mut}}$. In the experiments the mutation parameters were set as $p_{\textrm{split}} = p_{\textrm{dup}} = 0.1\,p_{\textrm{mut}}$, and$ p_{\textrm{float}} = p_{\textrm{switch}} = p_{\textrm{mu}}$. It appears as if the mutation rate is low, $p_{\textrm{mut}}=0.01$ the almost pure strategy of \textco{all-cooperate} becomes dominant, but for $p_{\textrm{ut}}=0.1$ the opposite \textco{all-defect} becomes the dominant strategy.

Result: No strategies appear invulnerable, but many of those that lie near the discrete variants are commong among the dominating strategies. There are few runs where strategies dominate with for example 0.25 or 0.3. In one bit (number 8, 28, 22, 25) they may be more stable, as it seems more difficult to mutate them to a more evil strategy. 

%Resultat: Inga strategier verkar osårbara men många av de som ligger nära de diskreta varianterna är
%vanliga bland de dominerande strategierna. få körningar där strategier dominerar med t.ex 0.25 eller
%0.3 I en bit (nr8 nr 28 nr 22, nr 25) kanske kan de vara stabilare då det är svårt att mutera dem till en
%elak strategi? Skulle behövt köra riktigt långa körningar för att se om det stabiliserar sig bättre, men
%förmodligen kommer det väl inte bli mer än perioder av stabilitet. Intressant med perioderna av $25\,\%$
%cc, $25\,\%$ cd, $25\,\%$ dc, $25\,\%$ dd. Har inte kollat nu vad det är för sammansättning av strategier som ger
%dessa utfall men man kan ju tycka att det är besynnerligt att de kan vara stabila under flera
%generationer då detta betyder att det finns en grupp som utnyttjar en annan. Men det kanske inte är
%samma grupp som utnyttjar varje generation I och för sig. I de flesta övergångar så går man direkt
%från en dominant strategi till en annan men ibland så sker det med ett mellanliggande strategi som
%språngbräda (exempel 10, 17, 19) (lite löst definierat hur länge en mellanliggande strategi får leva och
%ändå kallas språngbräda).

However, what can actually be said is that there is one dominant strategy.

\paragraph{Standard simulations 6--10 och 21--25}
Of the standard runs 6--10 and 21--25 the strategy with the longest life is visible in table \ref{tab:results:dominant:6}, of this we can note that 5 of them are fairly similar to a pure 0,1 strategy. For one example see Figure \ref{fig:results:example:1}. It is interesting that the two strategies that have survived the longest are 0.2453,0.99967 and 0.1715,1 see Figure \ref{fig:results:example:2}  and Figure \ref{fig:results:example:3}.

This could imply a benefit of float strategies compared to binary strategies. The most effective defective strategies are 0 strategies.

%Av standardkörningarna 6--10 och 21--25 så är den strategi med längst liv ser ut som synes i Tablell \ref{tab:results:dominant}
%av detta kan man ju notera att 5 stycken är ganska snarlika en 0,1 strategi. Att de två som överlevt längst är så udda strategier som 0.2453, 0.99967 och 0.1715,1 de två längsta defective strategierna är båda 0 strategier.

\begin{figure}[htbp]
\centering
\includegraphics[angle=90, width=\linewidth]{pdf/standardRun23.pdf}
\caption{Illustration of a standard simulation result. This is a
  typical outcome example. The strategy dominating for most generation
  is something close to a 0,1 strategy}
\label{fig:results:example:1}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics[width=\linewidth]{pdf/standardRun22.pdf}
\caption{Illustration of a standard simulation result}
\label{fig:results:example:2}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics[angle=90, width=\linewidth]{pdf/standardRun25.pdf}
\caption{Illustration of a standard simulation result}
\label{fig:results:example:3}
\end{figure}

Apart from this the results are rather mixed results. There are both runs where the dominating strategues are plentiful and quickly replaced, and others where few strategies dominate for long periods of time. That is, we have both runs where DD and CC interchange frequently, and runs where DD dominate, and CC dominate.

%väldigt blandade resultat. Det finns både körningar där de dominerande strategierna är många och byts
%snabbt och andra där enstaka strategier dominerar under långa perioder. Både omgångar där DD och
%CC växlar mycket, omgångar där DD dominerar överlag och andra omgångar där CC dominerar
%överlag. Antal strategier I snitt 132, högst 152 lägst 106.

\begin{table}[!hbtp]
  \centering
  \caption{Dominant strategies in the standard simulations, 6--10 and
    21--25. The table show those strategies that were dominant during
    the longest period in the simulations. Note that the outcome of
    simulation 7 was hard to determine.}
  \label{tab:results:dominant:6}
  \footnotesize
  \begin{tabular}{lllc}
    Simu-  & dominating & duration  & dominating \\
    lation & strategy   & (approx)  & at end \\
    \hline
    6  & 0.0110         & 4000 & x \\          
    7  & ---            & --- &            \\
    8  & 0.12, 1        & 5000 &            \\ 
    9  & 0.0            & 6000 &            \\ 
    10 & 0.09,1         & 4000 &            \\ 
    21 & 0.0578,1       & 4500 & x \\          
    22 & 0.2453, 9.9967 & 8000 & x \\          
    23 & 0.05, 1        & 3500 &            \\ 
    24 & 0.0580, 0.9991 & 3500 & x \\          
    25 & 0.1715, 1      & 7000 & x \\          
    \hline
  \end{tabular}
\end{table}

%\red{One figure here!}

%\paragraph{The other simulations} Jag kan nog säga varför vi ska avfärda 1:5 och 31:35 men de andra är inte helt uppenbara. Kanske
%snarare handlar om att se om man får liknande resultat trots att man ändrar på parametrar. Dock får vi
%ganska olika resultat. Kanske kan man se 0 som en trivial lösning. Den är ju svår att rå på. I
%nedanstående spalt har jag inte kollat om de är dominerande vid 10000 och därför kan en del
%potentiellt överleva längre. Där jag inte skrivit I för att jag inte vet går det givetvis att kolla upp vilka
%de är men jag orkte inte det nu.

Table \ref{tab:results:dominant:11} shows dominant strategies in non standard simulations.

\begin{table}[!hbtp]
  \centering
  \caption{Dominant strategies in the \textit{non} standard simulations, 11--20 and
    26--30}
  \label{tab:results:dominant:11}
  \footnotesize
  \begin{tabular}{lllc}
    Simu-  & dominating & duration  & dominating \\
    lation & strategy   & (approx)  & at end \\
    \hline
11  &  0.19,1              & 6000      \\          
12  &  0                   & 7000               \\ 
13  &  samarbetande        & 5000               \\ 
14  &  0                   & 7000               \\ 
15  &  0                   & 3000               \\ 
16  &  0                   & 4000      \\          
17  &  (0.05,0),(0.05,1)   & 2000,2000 \\          
18  &  0.06,1              & 3000               \\ 
19  &  0.06,1              & 6000      \\          
20  &  0.06,1              & 4000      \\          
26  & 0.1560, 0.9973       & 5000\\          
27  & 0.8910,1             & 6000\\          
28  & inga långvariga strat&              \\ 
29  & 0                    & 6000\\          
30  & samarbetande         & 3500\\          
    \hline
  \end{tabular}
\end{table}

\paragraph{Simulation 1--5, pMut = $1\cdot 10^{-4}$}
%verkar ha för låg grad av mutationer. Minst antal strategier uppkommer och det verkar vara svårt att ta över populationen.
In general these runs develop rather few strategies, which can be explained by the lower mutation rate. single strategies dominate during long time periods. 


%Generellt kännetecknas körningarna av att relativt få strategier utvecklas under 10000 generationer.
%Vilket kan förklaras av att det är den lägsta mutationsgraden av alla körningar. Enstaka strategier
%dominerar långa tidsförlopp. 4 av 5 körningar dominerar DD vid 10 000 och har ett relativt starkt
%övertag under hela omgången.

%\red{Should we discard these and show no figures?}

\paragraph{Simulation 11--15, pMut = $1\cdot 10^{-3}$}
When setting pMut to $1\cdot10^{-3}$ the mutations increase as expected, and in some of the simulations there are quick changes in the strategy population. During some simulations there are however still long periods where a single strategy is dominating.


%antal strategier I 242 snitt, 175 flest, minst 130. vilket som väntat är mer än standardkörningen. Trots
%detta förekommer strategier som är dominerande under långa tidsperioder. Men också matcher där det
%skiftar fort. Två matcher domineras av CC och två av DD en är väldigt turbulent men slutar I stabilt
%DD.

\paragraph{Simulation 16--20, nPar=0.1}
Setting nPar=0.1 fewer parents means less strategies and slower shifts


%strategier I snitt: 87. som mest 118 som minst 70. Färre föräldrar ger färre antal strategier. Långa
%perioder av både CC och DD. Men också en körning där $25\,\%$ av var är stabil under en längre period.

\paragraph{Simulation 26--30, nPar=0.4}
Highest number of strategies, very turbulent periods with quick shifts in dominating strategies. there are more stable periods but they are few.

 
%flest strategier av alla omgångar. I snitt ?? vilket syns I de svajiga perioderns om kännetecknas av
%snabba byten och många olika strategier. Det finns dock en del perioder som kan ses som rättså
%stabila. Tre matcher domineras av cc och tre dominerar I alla fall andra halvlek av dd.

\paragraph{Simulation 31--35, pErr=0}
Very difficult to break a dominating strategy, the runs commonly end up by all defecting. A bit lower number of strategies compared to the standard run. 
%väldigt svårt att bryta igenom dominerande strategi. Gör också att matcherna till stor del bara slutar I
%att alla defektar eller att alla samarbetar. Endast kortare perioder av cd, dc eller t.ex $80\,\%$ cc
%förekommer. Lite färre strategier I snitt än standardkörningen.modellen fungerar inte alls lika bra med
%noll fel men jag kommer inte ihåg exakt vad det var vi skulle leta efter för att bevisa det.


\subsection{Discussion and further work}
We can note that mixed strategies can outperform binary strategies over long runs. This result needs further verification, but hints at a possible opening for improving strategies employed in the prisoners dilemma game.

In an extension to this work there are a few things to consider regarding implementation and testing. Mainly the time it takes to run the model, this could be much improved by implementing the population dynamics as a dynamical system a'la Lotka-Volterra instead of evaluating every single individual against each other. This would cause the discretion described in implementation section could be avoided.

An interesting extension of this work would be to alter the payoff matrix and see how this affected the results. It would also be interesting to see how varying starting conditions would affect the results.





% END 040.results.tex.
